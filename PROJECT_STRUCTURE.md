# üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ KudaBot

## üìä –ì—Ä–∞—Ñ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ñ–∞–π–ª–æ–≤

```
index.js (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
  ‚îú‚îÄ bot.js (–≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –±–æ—Ç–∞)
  ‚îÇ  ‚îú‚îÄ utils/cityManager.js (–≥–æ—Ä–æ–¥–∞)
  ‚îÇ  ‚îú‚îÄ utils/categoryManager.js (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
  ‚îÇ  ‚îú‚îÄ utils/placeManager.js (–º–µ—Å—Ç–∞)
  ‚îÇ  ‚îú‚îÄ utils/photoManager.js (—Ñ–æ—Ç–æ)
  ‚îÇ  ‚îú‚îÄ utils/firebaseStorage.js (Firebase —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
  ‚îÇ  ‚îú‚îÄ utils/firebaseDatabase.js (Firebase –ë–î)
  ‚îÇ  ‚îú‚îÄ utils/adsManager.js (—Ä–µ–∫–ª–∞–º–∞)
  ‚îÇ  ‚îî‚îÄ utils/photoDownloader.js (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ)
  ‚îÇ
  ‚îî‚îÄ utils/fileSyncManager.js (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Firebase)
     ‚îú‚îÄ utils/firebaseDatabase.js
     ‚îú‚îÄ utils/categoryManager.js
     ‚îú‚îÄ utils/cityManager.js
     ‚îú‚îÄ utils/placeManager.js
     ‚îî‚îÄ utils/adsManager.js

migrate-to-firebase.js (–º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
  ‚îú‚îÄ utils/firebaseDatabase.js
  ‚îú‚îÄ utils/categoryManager.js
  ‚îú‚îÄ utils/cityManager.js
  ‚îú‚îÄ utils/placeManager.js
  ‚îî‚îÄ utils/adsManager.js

migrate-photos.js (–º–∏–≥—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ)
  ‚îî‚îÄ Firebase Storage API

add-admin.js (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
  ‚îî‚îÄ .env —Ñ–∞–π–ª

init-data.js (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
  ‚îî‚îÄ data/*.json —Ñ–∞–π–ª—ã
```

## üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

| –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|
| `utils/` | –£—Ç–∏–ª–∏—Ç—ã –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã |
| `data/` | JSON —Ñ–∞–π–ª—ã: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≥–æ—Ä–æ–¥–∞, —Ä–µ–∫–ª–∞–º—É |
| `uploads/` | –§–æ—Ç–æ, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã |
| `temp/` | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ |

## üîß –£—Ç–∏–ª–∏—Ç—ã (utils/)

### –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **categoryManager.js** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (CRUD)
- **cityManager.js** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞–º–∏ (CRUD)
- **placeManager.js** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞–º–∏ (CRUD)
- **adsManager.js** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–æ–π (CRUD)

### Firebase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **firebaseDatabase.js** - Realtime Database (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- **firebaseStorage.js** - Cloud Storage (—Ñ–æ—Ç–æ)

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **fileSyncManager.js** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ ‚Üí Firebase

### –§–æ—Ç–æ
- **photoManager.js** - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ç–æ –≤ –ø–∞–º—è—Ç–∏
- **photoDownloader.js** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å URL
- **photoViewer.js** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ

### –î—Ä—É–≥–æ–µ
- **fileManager.js** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (npm)

```bash
npm start              # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
npm run migrate-firebase  # –ú–∏–≥—Ä–∞—Ü–∏—è –≤ Firebase
node migrate-photos.js    # –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ
node add-admin.js         # –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
node init-data.js         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
Telegram API (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
         ‚Üì
    bot.js (–æ–±—Ä–∞–±–æ—Ç–∫–∞)
         ‚Üì
   –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (—á–∏—Ç–∞—é—Ç/–ø–∏—à—É—Ç)
         ‚Üì
   JSON —Ñ–∞–π–ª—ã (–ª–æ–∫–∞–ª—å–Ω–æ)
   +
   Firebase DB (–æ–±–ª–∞–∫–æ)
         ‚Üì
fileSyncManager (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è)
```

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é —á–µ—Ä–µ–∑ Telegram
2. **bot.js** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
3. **categoryManager** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `data/categories.json`
4. **fileSyncManager** –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ (fs.watch)
5. **firebaseDatabase** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤ Firebase

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

–í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç:
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ JSON —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ Firebase Database —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ File Sync Manager –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ù–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—É–¥–∞–ª–µ–Ω—ã: admin.js, check-environment.js, test-firebase.js)

## üóëÔ∏è –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

–£–¥–∞–ª–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑ –ø–æ–ª–µ–∑–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
- `admin.js` - –ø—É—Å—Ç–æ–π –∫–ª–∞—Å—Å –∑–∞–≥–ª—É—à–∫–∞
- `check-environment.js` - —Å–ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
- `check-setup.sh` - bash —Å–∫—Ä–∏–ø—Ç –¥–ª—è Linux
- `test-firebase.js` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Firebase
- `.env.example` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞, ID –∞–¥–º–∏–Ω–æ–≤, Firebase)
- `package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- `serviceAccountKey.json` - Firebase –∫–ª—é—á (–≤ .gitignore)
